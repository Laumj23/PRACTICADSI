<div *ngIf="authSvc.isDoctor(this.user); else userpage">
    <div class="container" *ngIf="citasDoctor$ | async as dcita; else loading">
    
        <div class="profile">
            <h1>Tus citas</h1>
            <img [src]="currentImage" alt=""/>
            <h2>Tus próximas citas:</h2>
        </div>
    
        <ng-container *ngIf="dcita.length>0; else empty">
            <mat-card class="cita-card" *ngFor="let c of dcita">
                <mat-card-header>
                    <mat-icon mat-card-avatar>local_hospital</mat-icon>
                    <mat-card-title>{{c.consulta}}</mat-card-title>
                    <mat-card-subtitle style="font-weight: bold;">{{c.date}}</mat-card-subtitle>
                </mat-card-header>
                <mat-card-content>
                    <p style="font-weight: bold;">Detalles del paciente:</p>
                    <p>{{c.detalles}}</p>
                </mat-card-content>
            </mat-card>
        </ng-container>
    
        <h2>Opciones:</h2>
        <div class="div-button">
            <div class="cita-button" >
                <button mat-flat-button>
                    <p>Calendario Completo</p>
                    <mat-icon>today</mat-icon>
                </button>
            </div>
        </div>
    </div>
</div>

<ng-template #userpage>
    <div class="container" *ngIf="citasUser$ | async as cita; else loading">
    
        <div class="profile">
            <h1>Tus citas</h1>
            <img [src]="currentImage" alt=""/>
            <h2>Tus próximas citas:</h2>
        </div>
    
        <ng-container *ngIf="cita.length>0; else empty">
            <mat-card class="cita-card" *ngFor="let c of cita">
                <mat-card-header>
                    <mat-icon mat-card-avatar>local_hospital</mat-icon>
                    <mat-card-title>{{c.consulta}}</mat-card-title>
                    <mat-card-subtitle style="font-weight: bold;">{{c.date}}</mat-card-subtitle>
                </mat-card-header>
                <mat-card-content>
                    <p>Consulta con la doctora {{c.doctor}}</p>
                    <mat-icon >room</mat-icon>
                    <p style="font-weight: bold; width: 80%; display: inline-block; margin: 0; height: 32px; vertical-align: middle;">
                        {{c.centro}}
                    </p>
                </mat-card-content>
            </mat-card>
        </ng-container>
    
        <h2>Opciones:</h2>
        <div class="div-button">
            <div class="cita-button" >
                <button mat-flat-button routerLink="/citas/new-cita">
                    <p>Nueva consulta</p>
                    <mat-icon>post_add</mat-icon>
                </button>
                <button mat-flat-button>
                    <p>Calendario Completo</p>
                    <mat-icon>today</mat-icon>
                </button>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #loading>
    <div class="container-spinner">
    <mat-spinner></mat-spinner>
    </div>
</ng-template>
<ng-template #empty>
  <mat-card class="empty">
      <mat-card-content>
          <p>No hay citas programadas</p>
      </mat-card-content>
  </mat-card>
</ng-template>
